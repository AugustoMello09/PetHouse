<div class="relative dropdown-container" [ngClass]="{'cursor-pointer': logado, 'sacola-desativada': !logado}">
  <div class="flex items-center justify-around">
    <button (click)="toggleDropdown()" class="relative">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 fill-current text-textDestaque hover:scale-110 cursor-pointer transition-all" version="1.0" viewBox="0 0 512 512" aria-label="sacola">
        <path d="M240.5 1c-32.7 5.1-62.5 26.8-77.3 56.5-7 14-11.2 30.9-11.2 45v5.4l-29.3.3-29.4.3-4.2 2.8c-8.2 5.4-6.6-7.5-21.7 178.7C57.9 407.5 54 460.4 54.3 467.2c.3 8.5.8 10.5 4 17.3 4.2 8.8 12.2 17.3 20.3 21.7 11.2 6 3.1 5.8 177 5.8 102.5 0 161-.4 164.5-1 14-2.6 27.1-13 33.6-26.5 3.2-6.8 3.7-8.8 4-17.3.3-6.8-3.6-59.8-13.1-177.2-15.1-186.2-13.5-173.3-21.7-178.7l-4.2-2.8-29.4-.3-29.3-.3v-5.7c0-3.1-.7-9.8-1.5-14.7-6.6-41-37.2-74.1-78-84.6C271.3.6 250-.4 240.5 1zm37 38.4c26.5 9.1 44.7 32.6 46.3 59.8l.5 8.8H188v-6.3c0-3.5.9-9.9 2-14.1 6.3-24.7 24.4-42.9 49.2-49.6 10.8-2.9 27.4-2.3 38.3 1.4zM152 189.9c0 30.1.4 46.9 1.1 48.8 1.3 3.4 5.5 8 9.1 9.9 3.4 1.8 10.9 1.8 15.1 0 4.2-1.7 8.3-6.6 9.7-11.4.6-2.3 1-20.8 1-48.5V144h136v44.7c0 27.7.4 46.2 1 48.5 1.4 4.8 5.5 9.7 9.7 11.4 4.2 1.8 11.7 1.8 15.1 0 3.6-1.9 7.8-6.5 9.1-9.9.7-1.9 1.1-18.7 1.1-48.8V144h18.5c14.1 0 18.5.3 18.5 1.2 0 .7 5.8 73.2 13 161.1 8.3 103 12.6 160.6 12 162.1-.4 1.2-2.3 3.5-4 4.9l-3.2 2.7H97.2l-3.2-2.7c-1.7-1.4-3.6-3.7-4-4.9-.6-1.5 3.7-59.2 12-162.1 7.2-87.9 13-160.4 13-161.1 0-.9 4.4-1.2 18.5-1.2H152v45.9z"/>
      </svg>
    </button>
    <span *ngIf="quantidade > 0" class=" bg-subTextCard hover:bg-textSecunda text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:scale-110 cursor-pointer transition-all">{{ quantidade }}</span>
  </div>
  <div *ngIf="showDropdown" class="absolute right-0 mt-2 w-80 bg-white border border-gray-300 rounded-lg shadow-lg p-2">
    <ng-container *ngIf="carrinho.itemsCarrinho.length > 0; else emptyCart">
      <div *ngFor="let item of carrinho.itemsCarrinho"  class="flex items-center mb-4">
        <img [src]="isImageUrl(item.imgProduto) ? item.imgProduto : 'data:image/jpeg;base64,' + item.imgProduto" 
        alt="Produto" class="w-16 h-16 object-cover rounded-md" />
        <div class="ml-4 flex-1">
              <h3 class="font-semibold">{{ item.nome }}</h3>
             <p class="text-gray-600">{{ item.quantidade }} x R$ {{ item.preco }}</p>
            </div>
        <mat-divider></mat-divider>
      </div>
      <div class="flex justify-between items-center">
        <p class="text-base font-bold font-font-primaria p-1">Valor Total: <span class="font-medium">R${{ carrinho.valorTotalCarrinho }}</span></p>
        <button (click)="irCarrinho()" class="font-bold text-sm font-font-secundaria p-1 text-white bg-textDestaque rounded-md">Ir para o carrinho</button>
      </div>
  
    </ng-container>
    <ng-template #emptyCart>
      <div class="p-4 text-center">
        <p class="text-gray-500">O carrinho est√° vazio</p>
        <p class="text-textDestaque text-lg font-bold hover:text-textSecunda">Continuar comprando</p>
      </div>
    </ng-template>
  </div>
</div>



